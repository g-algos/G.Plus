<Window x:Class="GPlus.UI.Views.DataLinkConflictsView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:GPlus.UI.Views"  
        xmlns:commands="clr-namespace:G.wpf.Commands;assembly=G.wpf"
        xmlns:converters="clr-namespace:GPlus.UI.Helpers.Converters"  
        xmlns:viewModels="clr-namespace:GPlus.UI.ViewsModels"  
        xmlns:contents="clr-namespace:GPlus.Base.Resources.Localizations;assembly=GPlus.Base"  
        mc:Ignorable="d"
        Title="{x:Static contents:Content.ManageDataLinks}" Height="Auto" MaxHeight="800" Width="Auto" MaxWidth="1800" ResizeMode="CanResize"
        WindowStartupLocation="CenterOwner">
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/G.wpf;component/Themes/Generic.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            <converters:IsValidElementIdConverter x:Key="IsValidElementIdConverter" />
        </ResourceDictionary>
    </Window.Resources>
    <Grid Margin="{StaticResource PaddingDefault}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

    <ScrollViewer VerticalScrollBarVisibility="Auto" Grid.Row="1">
        <Grid Margin="{StaticResource PaddingDefault}">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="20"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

            <DataGrid Grid.Column="0"
            ColumnWidth="*"
            Style="{StaticResource GDynamicDataGrid}"
            ItemsSource="{Binding DataRvt}"
            AutoGeneratingColumn="DataGrid_AutoGeneratingColumn"
            CellEditEnding="DataGrid_CellEditEnding"
            Margin="{StaticResource PaddingXS}"
            Background="{StaticResource GreyBrush}"
            EnableRowVirtualization="True"
            VerticalScrollBarVisibility="Disabled"
            HorizontalScrollBarVisibility="Auto"
            CanUserSortColumns="False"
            CanUserReorderColumns="False">
                <DataGrid.RowStyle>
                    <Style TargetType="DataGridRow">
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding [Action]}" Value="created">
                                    <Setter Property="Background" Value="LightGreen"/>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding [Action]}" Value="deleted">
                                    <Setter Property="Background" Value="Salmon"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </DataGrid.RowStyle>
            </DataGrid>
            <Border Grid.Column="1" Grid.RowSpan="2" 
         Width="1" 
         Background="{StaticResource BorderBrushStrong}"
         HorizontalAlignment="Center" />
            <DataGrid Grid.Column="2"
                  ColumnWidth="*"
                  Style="{StaticResource GDynamicDataGrid}"
                  ItemsSource="{Binding DataXls}"
                  AutoGeneratingColumn="DataGrid_AutoGeneratingColumn"
                  CellEditEnding="DataGrid_CellEditEnding"
                  Margin="{StaticResource PaddingXS}"
                  Background="{StaticResource GreyBrush}"
                  EnableRowVirtualization="True"
                  VerticalScrollBarVisibility="Disabled"
                  HorizontalScrollBarVisibility="Auto">
                <DataGrid.RowStyle>
                    <Style TargetType="DataGridRow">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding [Action]}" Value="created">
                                    <Setter Property="Background" Value="LightGreen"/>
                                    <Setter Property="IsEnabled" Value="False"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding [Action]}" Value="deleted">
                                    <Setter Property="Background" Value="Salmon"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding [ElementId], Converter={StaticResource IsValidElementIdConverter}}" Value="True">
                                    <Setter Property="IsEnabled" Value="True"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                </DataGrid.RowStyle>
            </DataGrid>
        </Grid>
    </ScrollViewer>
        <!-- Footer -->
        <Grid DockPanel.Dock="Bottom" Margin="{StaticResource PaddingSM}" Grid.Row="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <TextBlock Grid.Column="0" VerticalAlignment="Center">
                <Hyperlink Style="{StaticResource LinkLarge}"
                    Command="{x:Static commands:GlobalCommands.OpenUriCommand}" 
                    CommandParameter="http://g-algos.com/G.plus/DataLinks/#selective-merge">
                    Learn more
                </Hyperlink>
            </TextBlock>
            <Button Grid.Column="1" Content="OK" IsDefault="True" Style="{StaticResource PrimaryButton}" Command="{Binding MergeCommand}" ToolTip="{x:Static contents:Content.MergeSelected}"/>
        </Grid>
    </Grid>
</Window>
