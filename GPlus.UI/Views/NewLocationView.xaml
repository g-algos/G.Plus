<Window x:Class="GPlus.UI.Views.NewLocationView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:GPlus.UI.Views"
        xmlns:converters="clr-namespace:GPlus.UI.Helpers.Converters"
        xmlns:commands="clr-namespace:G.wpf.Commands;assembly=G.wpf"
        xmlns:controls="clr-namespace:G.wpf.Controls;assembly=G.wpf"
        xmlns:contents="clr-namespace:GPlus.Base.Resources.Localizations;assembly=GPlus.Base"  
        mc:Ignorable="d"
        Title="{x:Static contents:Content.NewLocationScheme}" Height="550" Width="500" ResizeMode="NoResize"
        WindowStartupLocation="CenterOwner">
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/G.wpf;component/Themes/Generic.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            <converters:StorageTypeToEnabledConverter x:Key="StorageTypeToEnabledConverter"/>
            <BooleanToVisibilityConverter x:Key="BoolToVis" />
        </ResourceDictionary>
    </Window.Resources>

    <DockPanel Margin="{StaticResource PaddingDefault}">



        <!-- Main Form Content -->
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Header Section -->
            <Grid Margin="{StaticResource PaddingXS}" Grid.Row="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="80"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <Label Content="{x:Static contents:Content.Name}" Grid.Column="0" Style="{StaticResource LabelMedium}"/>
                <TextBox Text="{Binding Name, UpdateSourceTrigger=PropertyChanged}"
                             Style="{StaticResource GTextBox}" 
                             Grid.Column="1"/>
            </Grid>

            <!-- Selection Panels -->
            <Grid Grid.Row="2">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="20"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <Label Grid.Column="0" Grid.Row="0"  
                       Content="{x:Static contents:Content.Categories}" Margin="0,4" Style="{StaticResource LabelMedium}"/>
                <controls:GCheckListBox 
                        Grid.Column="0" Grid.Row="1" 
                        Margin="{StaticResource PaddingXS}"
                        ItemsSource="{Binding AllCategories}" 
                        DisplayMemberPath="Name"
                        CheckedItems="{Binding SelectedCategories}" />
                <Border Grid.Column="1" Grid.RowSpan="2" 
                        Width="1" 
                        Background="{StaticResource BorderBrushStrong}"
                        HorizontalAlignment="Center" />
                <Label Grid.Column="2" Grid.Row="0"  
                        Content="{x:Static contents:Content.Parameters}" Margin="0,4" Style="{StaticResource LabelMedium}"/>
                <controls:GCheckListBox 
                         Grid.Column="2" Grid.Row="1" 
                         Margin="{StaticResource PaddingXS}"
                         ItemsSource="{Binding AllParameters}" 
                         DisplayMemberPath="Name"
                         CheckedItems="{Binding SelectedParameter}" />
            </Grid>

            <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="{StaticResource PaddingXS}" VerticalAlignment="Center"  Background="{StaticResource GreyBrush}">
                <CheckBox Content="{x:Static contents:Content.IncludeLinks}" Margin="{StaticResource PaddingXS}" IsChecked="{Binding IncludeLinks}" Style="{StaticResource SmallCheckBox}" VerticalAlignment="Center"/>
                <RadioButton Content="{x:Static contents:Content.ByValue}" IsChecked="{Binding ByValue}" Style="{StaticResource LabelMedium}" Margin="{StaticResource PaddingHorizontal}" VerticalAlignment="Center"/>
                <RadioButton Name="ByRangeRadioButton" Content="{x:Static contents:Content.ByRange}"  Style="{StaticResource LabelMedium}" VerticalAlignment="Center"
                    IsEnabled="{Binding SelectedParameter.StorageType,Converter={StaticResource StorageTypeToEnabledConverter},FallbackValue=False}" />
                <Label Content="{x:Static contents:Content.Step}" Style="{StaticResource LabelMedium}" Margin="10,0,0,0" 
                   Visibility="{Binding IsChecked, ElementName=ByRangeRadioButton, Converter={StaticResource BoolToVis}, ConverterParameter=False}"
                  VerticalAlignment="Center"/>
                <TextBox Style="{StaticResource GTextBox}"
                    Width="48"
                    Margin="{StaticResource PaddingXS}"
                    Visibility="{Binding IsChecked, ElementName=ByRangeRadioButton, Converter={StaticResource BoolToVis}, ConverterParameter=False}"
                    Text="{Binding Step, UpdateSourceTrigger=PropertyChanged}"/>
            </StackPanel>
            <!-- Footer -->
            <Grid DockPanel.Dock="Bottom" Margin="{StaticResource PaddingSM}" Grid.Row="3">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0" VerticalAlignment="Center">
                <Hyperlink Style="{StaticResource LinkLarge}"
                    Command="{x:Static commands:GlobalCommands.OpenUriCommand}" 
                    CommandParameter="http://g-algos.com/G.plus/LocalizationSchemas/#new-location-scheme-setup">
                    Learn more
                </Hyperlink>
                </TextBlock>
                <Button Grid.Column="1" Content="OK" IsDefault="True" Style="{StaticResource PrimaryButton}" Command="{Binding CreateAndCloseCommand}"/>
            </Grid>
        </Grid>
    </DockPanel>
</Window>
